const q=document.querySelector(".contenedor-pregunta"),r=5,P=60;let l=0,a=0,k,d,p=[];const L=document.getElementById("form-configuracion"),b=document.getElementById("select-categoria"),T=document.getElementById("select-dificultad");L&&b&&T&&L.addEventListener("submit",y=>{y.preventDefault();const m=b.value,u=T.value,c={categoria:m,dificultad:u};localStorage.setItem("configuracionTrivial",JSON.stringify(c)),window.location.href="./game.html"});if(q){let m=function(e,t){return[...t,e].sort(()=>Math.random()-.5)},u=function(e,t){let n=t.querySelector(".temporizador");n||(n=document.createElement("p"),n.classList.add("temporizador","texto"),t.appendChild(n)),n.textContent=`Time remaining: ${e}s`},c=function(){clearInterval(k)},x=function(e,t){d=P,u(d,e),k=setInterval(()=>{d--,u(d,e),d<=0&&(c(),t())},1e3)},C=function(e,t){const n=m(e.correct_answer,e.incorrect_answers);t.innerHTML=`
            <a href="./index.html"><i class="fa-solid fa-circle-chevron-left button-back"></i></a>
            <h2 class="texto">${e.question}</h2>
            <div class="opciones-grid"></div>
            <button class="btn-siguiente texto" style="display:none;">Next question</button>
            <p class="puntuacion texto">Score: ${l} / ${r}</p>
        `;const v=t.querySelector(".opciones-grid");n.forEach(o=>{const s=document.createElement("button");s.className="opcion texto",s.textContent=o,v.appendChild(s)});const i=t.querySelectorAll(".opcion"),f=t.querySelector(".btn-siguiente"),S=t.querySelector(".puntuacion");let g=!1;function E(){i.forEach(o=>o.disabled=!0)}function $(){f.style.display="none",t.innerHTML=`
                <h2 class="texto">Game over</h2>
                <p class="texto">Your final score is ${l} out of ${r}.</p>
                <button class="btn-reiniciar texto">Replay</button>
            `,t.querySelector(".btn-reiniciar").addEventListener("click",()=>{l=0,a=0,p=[],h(t)})}function I(){g||(g=!0,c(),E(),alert(`⏰ Time's up! La respuesta correcta era: ${e.correct_answer}`),i.forEach(o=>{o.textContent.trim()===e.correct_answer.trim()&&(o.style.backgroundColor="#51cf66",o.style.color="white")}),a++,S.textContent=`Score: ${l} / ${r}`,a<r?f.style.display="inline-block":$())}x(t,I),i.forEach(o=>{o.addEventListener("click",()=>{if(g)return;g=!0,c(),E();const s=e.correct_answer.trim();i.forEach(w=>{w.textContent.trim()===s&&(w.style.backgroundColor="#51cf66",w.style.color="white")}),o.textContent.trim()===s?(l++,o.style.backgroundColor="#51cf66",o.style.color="white"):(o.style.backgroundColor="#e03131",o.style.color="white",alert(`❌ Respuesta incorrecta. La respuesta correcta era: ${e.correct_answer}`)),a++,S.textContent=`Score: ${l} / ${r}`,a<r?f.style.display="inline-block":$()})}),f.addEventListener("click",()=>{f.style.display="none",h(t)})};var _=m,A=u,M=c,N=x,z=C;async function y(){const e=localStorage.getItem("configuracionTrivial");let t=`https://opentdb.com/api.php?amount=${r}&type=multiple`;if(e){const i=JSON.parse(e);i.categoria&&(t+=`&category=${i.categoria}`),i.dificultad&&(t+=`&difficulty=${i.dificultad}`)}const n=await fetch(t);if(!n.ok)throw n.status===429?alert("⚠️ Too many requests to the API. Please wait a few seconds and try again."):alert("An error occurred while fetching the questions."),new Error("API error: "+n.status);p=(await n.json()).results}async function h(e){if(p.length===0&&await y(),a<p.length){const t=p[a];C(t,e)}else e.innerHTML='<p class="texto">❗ No more questions available.</p>'}h(q)}
//# sourceMappingURL=main.js.map
